(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[535],{3550:(e,t,r)=>{"use strict";r.d(t,{EK:()=>o,LQ:()=>s,Qr:()=>i,VU:()=>l,Zq:()=>n,_1:()=>u,c4:()=>d,mb:()=>m,od:()=>c,yY:()=>p});let a="cyber-ochmistrz-cruises";function n(){let e=localStorage.getItem(a);if(e)try{let t=JSON.parse(e),r=!1,n=t.map(e=>{let t={...e},a=!1;if(!t.days){let e=Array.from({length:t.length},(e,t)=>({dayNumber:t+1,recipes:[]}));t.days=e,a=!0}return t.additionalSupplies||(t.additionalSupplies=[],a=!0),a&&(r=!0),t});r&&localStorage.setItem(a,JSON.stringify(n))}catch(e){console.error("Failed to migrate cruises:",e)}let t=localStorage.getItem(a);return t?JSON.parse(t):[]}function i(e){return n().find(t=>t.id===e)}function s(e){let t=n(),r=t.findIndex(t=>t.id===e.id);r>=0?t[r]={...e,dateModified:new Date().toISOString()}:t.push(e),localStorage.setItem(a,JSON.stringify(t))}function l(e){let t=n().filter(t=>t.id!==e);localStorage.setItem(a,JSON.stringify(t))}function d(e,t,r){let a=new Date().toISOString(),n=Array.from({length:t},(e,t)=>({dayNumber:t+1,recipes:[]}));return{id:Date.now().toString(),name:e,dateCreated:a,dateModified:a,length:t,crew:r,days:n}}function o(e,t,r){let a=i(e);if(!a)return;let n=a.days.findIndex(e=>e.dayNumber===t);-1!==n&&(a.days[n].recipes.includes(r)||(a.days[n].recipes.push(r),s(a)))}function u(e,t,r){let a=i(e);if(!a)return;let n=a.days.findIndex(e=>e.dayNumber===t);-1!==n&&(a.days[n].recipes=a.days[n].recipes.filter(e=>e!==r),s(a))}function c(e,t,r){let a=i(e);if(!a)return;a.additionalSupplies||(a.additionalSupplies=[]);let n=a.additionalSupplies.findIndex(e=>e.id===t);n>=0?a.additionalSupplies[n].amount=r:a.additionalSupplies.push({id:t,amount:r}),s(a)}function m(e,t,r){let a=i(e);if(!a||!a.additionalSupplies)return;let n=a.additionalSupplies.findIndex(e=>e.id===t);-1!==n&&(a.additionalSupplies[n].amount=r,s(a))}function p(e,t){let r=i(e);r&&r.additionalSupplies&&(r.additionalSupplies=r.additionalSupplies.filter(e=>e.id!==t),s(r))}},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},5818:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var a=r(5155),n=r(2115),i=r(3550),s=r(5695);function l(){let e=(0,s.useRouter)(),[t,r]=(0,n.useState)({name:"",length:1,crew:1}),[l,d]=(0,n.useState)({name:"",length:"",crew:""}),o=e=>{let{name:t,value:a,type:n}=e.target;r(e=>({...e,[t]:"number"===n?Number(a):a})),l[t]&&d(e=>({...e,[t]:""}))},u=()=>{let e={name:"",length:"",crew:""};return t.name.trim()||(e.name="Nazwa rejsu jest wymagana"),t.length<1&&(e.length="Długość rejsu musi być większa niż 0"),t.crew<1&&(e.crew="Liczba załogant\xf3w musi być większa niż 0"),d(e),!Object.values(e).some(e=>""!==e)};return(0,a.jsxs)("div",{className:"max-w-xl mx-auto p-6 bg-white rounded-lg shadow-sm",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Dodaj nowy rejs"}),(0,a.jsxs)("form",{onSubmit:r=>{if(r.preventDefault(),!u())return;let a=(0,i.c4)(t.name,t.length,t.crew);(0,i.LQ)(a),e.push("/rejsy")},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nazwa rejsu"}),(0,a.jsx)("input",{type:"text",id:"name",name:"name",value:t.name,onChange:o,className:"w-full px-3 py-2 border rounded-md ".concat(l.name?"border-red-500":"border-gray-300")}),l.name&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"length",className:"block text-sm font-medium text-gray-700 mb-1",children:"Długość rejsu (dni)"}),(0,a.jsx)("input",{type:"number",id:"length",name:"length",min:"1",value:t.length,onChange:o,className:"w-full px-3 py-2 border rounded-md ".concat(l.length?"border-red-500":"border-gray-300")}),l.length&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l.length})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"crew",className:"block text-sm font-medium text-gray-700 mb-1",children:"Liczba załogant\xf3w"}),(0,a.jsx)("input",{type:"number",id:"crew",name:"crew",min:"1",value:t.crew,onChange:o,className:"w-full px-3 py-2 border rounded-md ".concat(l.crew?"border-red-500":"border-gray-300")}),l.crew&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l.crew})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,a.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Zapisz rejs"}),(0,a.jsx)("button",{type:"button",onClick:()=>e.push("/rejsy"),className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Anuluj"})]})]})]})}},7266:(e,t,r)=>{Promise.resolve().then(r.bind(r,5818))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(7266)),_N_E=e.O()}]);