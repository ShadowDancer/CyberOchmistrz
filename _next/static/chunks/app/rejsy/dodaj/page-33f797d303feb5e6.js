(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[535],{3550:(e,t,r)=>{"use strict";r.d(t,{EK:()=>o,LQ:()=>s,Qr:()=>i,VU:()=>l,Zq:()=>a,_1:()=>u,c4:()=>d,mb:()=>m,od:()=>c,yY:()=>p});let n="cyber-ochmistrz-cruises";function a(){let e=localStorage.getItem(n);if(e)try{let t=JSON.parse(e),r=!1,a=t.map(e=>{let t={...e},n=!1;if(!t.days){let e=Array.from({length:t.length},(e,t)=>({dayNumber:t+1,recipes:[]}));t.days=e,n=!0}return t.additionalSupplies||(t.additionalSupplies=[],n=!0),n&&(r=!0),t});r&&localStorage.setItem(n,JSON.stringify(a))}catch(e){console.error("Failed to migrate cruises:",e)}let t=localStorage.getItem(n);return t?JSON.parse(t):[]}function i(e){return a().find(t=>t.id===e)}function s(e){let t=a(),r=t.findIndex(t=>t.id===e.id);r>=0?t[r]={...e,dateModified:new Date().toISOString()}:t.push(e),localStorage.setItem(n,JSON.stringify(t))}function l(e){let t=a().filter(t=>t.id!==e);localStorage.setItem(n,JSON.stringify(t))}function d(e,t,r){let n=new Date().toISOString(),a=Array.from({length:t},(e,t)=>({dayNumber:t+1,recipes:[]}));return{id:Date.now().toString(),name:e,dateCreated:n,dateModified:n,length:t,crew:r,days:a}}function o(e,t,r){let n=i(e);if(!n)return;let a=n.days.findIndex(e=>e.dayNumber===t);-1!==a&&(n.days[a].recipes.includes(r)||(n.days[a].recipes.push(r),s(n)))}function u(e,t,r){let n=i(e);if(!n)return;let a=n.days.findIndex(e=>e.dayNumber===t);-1!==a&&(n.days[a].recipes=n.days[a].recipes.filter(e=>e!==r),s(n))}function c(e,t,r){let n=i(e);if(!n)return;n.additionalSupplies||(n.additionalSupplies=[]);let a=n.additionalSupplies.findIndex(e=>e.id===t);a>=0?n.additionalSupplies[a].amount=r:n.additionalSupplies.push({id:t,amount:r}),s(n)}function m(e,t,r){let n=i(e);if(!n||!n.additionalSupplies)return;let a=n.additionalSupplies.findIndex(e=>e.id===t);-1!==a&&(n.additionalSupplies[a].amount=r,s(n))}function p(e,t){let r=i(e);r&&r.additionalSupplies&&(r.additionalSupplies=r.additionalSupplies.filter(e=>e.id!==t),s(r))}},5695:(e,t,r)=>{"use strict";var n=r(8999);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},5818:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var n=r(5155),a=r(2115),i=r(3550),s=r(5695);function l(){let e=(0,s.useRouter)(),[t,r]=(0,a.useState)({name:"",length:1,crew:1}),[l,d]=(0,a.useState)({name:"",length:"",crew:""}),o=e=>{let{name:t,value:n,type:a}=e.target;r(e=>({...e,[t]:"number"===a?Number(n):n})),l[t]&&d(e=>({...e,[t]:""}))},u=()=>{let e={name:"",length:"",crew:""};return t.name.trim()||(e.name="Nazwa rejsu jest wymagana"),t.length<1&&(e.length="Długość rejsu musi być większa niż 0"),t.crew<1&&(e.crew="Liczba załogant\xf3w musi być większa niż 0"),d(e),!Object.values(e).some(e=>""!==e)};return(0,n.jsxs)("div",{className:"max-w-xl mx-auto p-6 bg-white rounded-lg shadow-sm",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Dodaj nowy rejs"}),(0,n.jsxs)("form",{onSubmit:r=>{if(r.preventDefault(),!u())return;let n=(0,i.c4)(t.name,t.length,t.crew);(0,i.LQ)(n),e.push("/rejsy")},className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nazwa rejsu"}),(0,n.jsx)("input",{type:"text",id:"name",name:"name",value:t.name,onChange:o,className:"w-full px-3 py-2 border rounded-md ".concat(l.name?"border-red-500":"border-gray-300")}),l.name&&(0,n.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l.name})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"length",className:"block text-sm font-medium text-gray-700 mb-1",children:"Długość rejsu (dni)"}),(0,n.jsx)("input",{type:"number",id:"length",name:"length",min:"1",value:t.length,onChange:o,className:"w-full px-3 py-2 border rounded-md ".concat(l.length?"border-red-500":"border-gray-300")}),l.length&&(0,n.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l.length})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"crew",className:"block text-sm font-medium text-gray-700 mb-1",children:"Liczba załogant\xf3w"}),(0,n.jsx)("input",{type:"number",id:"crew",name:"crew",min:"1",value:t.crew,onChange:o,className:"w-full px-3 py-2 border rounded-md ".concat(l.crew?"border-red-500":"border-gray-300")}),l.crew&&(0,n.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l.crew})]}),(0,n.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,n.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Zapisz rejs"}),(0,n.jsx)("button",{type:"button",onClick:()=>e.push("/rejsy"),className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Anuluj"})]})]})]})}},7266:(e,t,r)=>{Promise.resolve().then(r.bind(r,5818))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(7266)),_N_E=e.O()}]);